---
description: Analyze issue/feature description and generate clarification questions for PM before spec-init
allowed-tools: Bash, Glob, Grep, Read, WebSearch, WebFetch
argument-hint: <issue-description>
---

# Spec Clarification - PM質問リスト生成

Issue/機能説明を分析し、spec-initの前にPMに確認すべき質問をリストアップする。

**入力された説明**: $ARGUMENTS

## Task: PMへの質問リスト生成

### 1. 入力内容の分析

入力された説明から以下を抽出・分析する:
- **現状（AS IS）**: 何が問題か、現在の状態
- **あるべき姿（TO BE）**: どうなってほしいか
- **暗黙の前提**: 書かれていないが想定されていそうなこと
- **曖昧な点**: 複数の解釈が可能な箇所

### 2. コードベース調査

入力内容に関連する既存実装を調査し、技術的な選択肢を把握する:
- 関連するファイル・モジュールの特定
- 既存の類似実装パターンの発見
- 技術的な制約・依存関係の把握

### 3. 質問カテゴリ

以下のカテゴリで質問を整理する:

#### A. ステークホルダー・ユーザー
- 誰のための機能か？
- 影響を受けるユーザーは？
- ユーザー数・頻度の想定は？

#### B. ビジネスコンテキスト
- なぜこの機能が必要か？（背景・目的）
- 優先度・緊急度は？
- 成功の定義は？

#### C. スコープ定義
- 対象範囲は？（含むもの・含まないもの）
- 対象環境は？（本番/ステージング/開発）
- エッジケースの扱いは？

#### D. 技術的な選択（PMの判断が必要なもの）
- 実装アプローチの選択肢を提示
- 各選択肢のトレードオフを説明
- 推奨案がある場合は理由と共に提示

#### E. 非機能要件
- パフォーマンス要件は？
- セキュリティ考慮は？
- SEO・アクセシビリティへの影響は？

#### F. 依存関係・スケジュール
- 関連するIssue/タスクは？
- 前提条件・ブロッカーは？
- 終了条件・削除条件は？（臨時対応の場合）

#### G. 受け入れ条件
- どうやって完了を確認する？
- テスト方法は？

### 4. 出力フォーマット

以下の形式で出力する:

```markdown
# PM確認事項 - [機能名の仮称]

## 入力内容の理解

### 現状（AS IS）
[抽出した現状の問題]

### あるべき姿（TO BE）
[抽出した目標状態]

### 不明点・曖昧な点
[複数解釈可能な箇所のリスト]

---

## PMに決めてもらいたいこと

### 1. [カテゴリ名]
**質問**: [具体的な質問]

| 選択肢 | 説明 | 適したケース |
|--------|------|-------------|
| A | ... | ... |
| B | ... | ... |

→ 推奨: [ある場合は理由と共に]

### 2. [カテゴリ名]
...

---

## 技術的な調査結果（参考情報）

### 関連する既存実装
- [ファイルパス]: [説明]

### 実装の選択肢
| 選択肢 | メリット | デメリット |
|--------|---------|-----------|
| A | ... | ... |
| B | ... | ... |

---

## 回答後の次のステップ

上記が決まったら、以下の形式でspec-initを実行:

\`\`\`
/kiro:spec-init [推奨する説明テンプレート]
\`\`\`
```

### 5. 質問生成のガイドライン

- **必須の質問のみ**: spec-initに必要な情報だけを質問する
- **選択肢を提示**: 可能な限り選択式で回答しやすくする
- **推奨を示す**: 技術的に明確な推奨がある場合は理由と共に提示
- **コンテキストを提供**: 質問の背景・影響を簡潔に説明
- **優先順位付け**: 最も重要な質問を上位に配置

### 6. 質問不要なケース

以下の場合は質問を省略し、その旨を明記:
- 入力内容で既に明確に定義されている項目
- 技術的に選択肢が1つしかない項目
- 後のフェーズ（design/tasks）で決められる詳細事項

---

## Instructions

1. 入力内容を注意深く分析し、明示的な情報と暗黙の前提を区別する
2. コードベースを調査し、技術的なコンテキストを把握する
3. PMが判断すべき項目と、技術者が決められる項目を区別する
4. 質問は具体的かつ回答しやすい形式にする
5. 回答後のspec-init用テンプレートを提供する

think
